# wiz-import-md
为知笔记插件，导入md文件。

> 注意，这个插件功能尚未完成，只做研究之用，您也可在此基础上进行下一步的修改。

## 使用
点击为知笔记的“选项”菜单，找到其中的“数据存储”tab页，这里会有本地数据存储地址，假设为 `E:\01.backup\wiz\`，则将 Import.Md 文件夹放入到 `E:\01.backup\wiz\Plugins` 下面。重启为知笔记，在【菜单】-【工具】下可以看到【导入MD文件...】子菜单，点击之后会打开一个对话框，先选择要导入的文件路径，再保存即可导入。

## 遗留问题
插件可以导入md文件，但还有以下几个致命的问题未能解决。

### 中文乱码
导入的md文件中如果包含中文，则必须是gbk编码。如果是utf-8等编码格式，则保存之后，中文就会显示为乱码。

### 换行符
导入的md文件换行符号被替换成了空格，导致文件内容都发生了变化

### 导入到为知笔记的位置
代码中没有对导入到为知笔记的位置提供选项，写死了 `var location = "/test导入/";`，后期要优化的话，应该是要先选择导入到为知笔记的哪个位置。

## 备注
为知笔记的 [windows 插件开发教程](http://www.wiz.cn/manual/plugin/index.html) 中提供的接口无法解决上述的问题，即无法准确的获取文件的内容。那么还有另外一种方式，那就是使用 node 在本地启动一个服务，然后插件请求这个服务获得文件内容。

## 其他方案
可以将md文件修改为txt文件，然后使用为知笔记的导入功能，将其导入之后，再修改文件名后缀为.md即可。

1. 【菜单】-【文件】-【导入文件...】，在弹出的对话框内选择目标文件夹，最后选择要导入的文件，点击导入。
2. 导入之后，选择（多选）这些文件，右键-重命名，批量修改。例如文件都是“.txt”后缀的话，则模版填“*”，替换里面的查找填写“.txt”，替换成“.md”，此时你可以看得到有预览效果，确保无误之后再点击确认即可。
